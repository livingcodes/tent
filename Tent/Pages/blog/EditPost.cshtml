@page "/post/edit/{id}"
@model Tent.Pages.Blog.EditPostPage

<p>
  <a href="/blog">POSTS</a>
</p>
<h1>
  @Model.Post?.Title
</h1>
<p>
  @Model.Post?.PublishDate.ToString("M/d/yy")
  <br>
  <a href="/post/@Model.Post?.Slug">View</a>
</p>

<form method="post" class="editor">
  <label for="Id">Id</label>
  <input name="Id" id="Id" type="text" value="@Model.Post?.Id" readonly>
  <br>
  <label for="Slug">Slug</label>
  <input name="Slug" id="Slug" type="text" value="@Model.Post?.Slug">
  <br>
  <label for="Title">Title</label>
  <input name="Title" id="Title" type="text" value="@Model.Post?.Title">
  <br>
  <label for="Body">Body</label>
  <textarea name="Body" id="Body">@Model.Post?.Body</textarea>
  <div class="preview">
    @Html.Raw(Model.Post?.Body)
  </div>
  <br>
  <label for="PublishDate">Publish Date</label>
  <input name="PublishDate" id="PublishDate" type="text" value="@Model.Post?.PublishDate.ToString("yyyy-MM-dd HH:mm:ss")" readonly>
  <br>
  <input name="cancel" type="submit" value="Cancel">
  <input name="save" type="submit" value="Save">
</form>

<script>
  var editor = document.querySelector('.editor textarea');
  var preview = document.querySelector('.preview');
  editor.onkeyup = function(e) {
    preview.innerHTML = editor.value;
  }
</script>

@section Header {
<style>
  label{width:18%; font-weight:normal; vertical-align:top;}
  input{width:81%}
  .preview{display:inline-block; vertical-align:top; width:40%;}
</style>
<style>
  .editor textarea{display:inline-block; width:40%; height:300px;}
  .editor input[type='submit']{display:inline-block; padding:5px 15px; margin:3px 0 0 0;}
  .editor input[name='save']{background-color:#0a0; color:#fff; border:1px solid #0b0;
    font-weight:bold; padding:9px 35px;}
  .editor input[name='cancel']{background-color:#dde; color:#999; border:1px solid #ddd;}
</style>
}